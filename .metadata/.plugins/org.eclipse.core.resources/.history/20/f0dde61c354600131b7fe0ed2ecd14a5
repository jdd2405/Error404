package ch.fhnw.error404.DerGrosseDalmuti.client;


import java.io.IOException;
import java.io.InputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.OutputStream;
import java.net.Socket;
import java.net.UnknownHostException;

import ch.fhnw.error404.DerGrosseDalmuti.shared.*;

public class Client {
	public static void main(String[] args) throws ClassNotFoundException{
		Client client = new Client();
		client.clientSocket();
	}
	
	private void clientSocket() throws ClassNotFoundException{
		
		String host = "127.0.0.1";
		int port = 5000;
		Player jonas = new Player("Jonas");
		Object object = jonas;
		
		Socket socket = null;
		
		try {
			
			// create socket
			socket = new Socket( host, port );
			
			// create outputStream for objects
			OutputStream os = socket.getOutputStream();
			ObjectOutputStream oos = new ObjectOutputStream( os );
			
			// write object to outputStream
			oos.writeObject( object );
			oos.flush();
			oos.close();
			
			// create inputStream for objects
			InputStream is = socket.getInputStream();
			ObjectInputStream ois = new ObjectInputStream( is );
			
			// read object from inputStream
			Object object2 = ois.readObject();
			
			// do something with object
			Player player = (Player)object2;
			player.getRank();
			
			ois.close();
			
			
		}
		catch ( UnknownHostException e ) {
		      e.printStackTrace();
		}
		catch ( IOException e ) {
		      e.printStackTrace();
		}
		
		finally {
	        if ( socket != null )
	          try { socket.close(); } catch ( IOException e ) { }
	      }
	}
}
