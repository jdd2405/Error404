package ch.fhnw.error404.DerGrosseDalmuti.client;

import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.Socket;

import ch.fhnw.error404.DerGrosseDalmuti.shared.*;

public class Client {
	public static void main(String[] args){
		Client client = new Client();
		client.clientSocket();
	}
	
	private void clientSocket(){
		try {
			Socket socket = new Socket("127.0.0.1", 5000);
			Player Jonas= new Player("Jonas");
			Object obj = Jonas;
			String s = "Connect me!";
			
		
			// create a new file with an ObjectOutputStream
	        FileOutputStream out = new FileOutputStream("obj.tmp");
	        ObjectOutputStream objOut = new ObjectOutputStream(out);
	
	        // write something in the file
	        objOut.writeObject(s);
	        objOut.writeObject(obj);
	        objOut.flush();
	
	        // create an ObjectInputStream for the file we created before
	        ObjectInputStream ois = new ObjectInputStream(new FileInputStream("obj.tmp"));
	
	        // read and print an object and cast it as string
	        System.out.println("" + (String) ois.readObject());
	
	        // read and print an object and cast it as string
	        Object objIn = ois.readObject();
	        if(objIn instanceof Player){
	       	 Player Player1 = (Player)objIn;
	       	System.out.println(Player1.getName());
	       	System.out.println(Player1.getRole());
	        }
		}
		catch(Exception e){
			System.out.println(e.getStackTrace());
			System.out.println(e.toString());
		}
	}
}
